---
import Base from "../../layouts/base/base.astro";

const { post, readMinutes } = Astro.props;
/** post.data shape (from your schema):
 *  title: string
 *  date: Date
 *  image?: string
 *  excerpt?: string
 *  tags?: string[]
 */

const data = post.data;

function fmtDate(d: Date | string) {
    const date = d instanceof Date ? d : new Date(d);
    return date.toLocaleDateString();
}
---

<Base title={data.title} url={`https://limecoder.com/${post.slug}`} description={data.excerpt}>
    <article class="max-w-3xl mx-auto px-4 sm:px-6 py-8">
        <!-- Title -->
        <h1 class="font-display text-3xl sm:text-4xl text-white leading-tight">{data.title}</h1>

        <!-- Meta row -->
        <div class="mt-3 flex flex-wrap items-center gap-2 text-sm text-[var(--color-ink-muted)]">
            <span>{fmtDate(data.date)}</span>
            {readMinutes && <span aria-hidden="true">•</span>}
            {readMinutes && <span>{readMinutes} min read</span>}
            {data.tags?.length && <span aria-hidden="true">•</span>}
            {data.tags?.map((t) => <span class="rounded-lg bg-[#26361e] text-[#bdeb7f] px-2 py-0.5">{t}</span>)}
        </div>

        <!-- Hero image (optional) -->
        {data.image && (
                <img src={data.image} alt="" class="mt-6 w-full rounded-xl border border-white/10 object-cover" loading="eager" />
        )}

        <!-- Post body -->
        <div class="prose prose-invert max-w-none mt-8" set:html={post.body} />
    </article>
</Base>