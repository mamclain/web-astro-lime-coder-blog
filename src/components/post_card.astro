---
const {
    href,
    title,
    excerpt,
    date,               // Date object
    tags = [],          // string[]
    minutes,            // number | undefined
    watermarkSrc,       // optional bg illustration
} = Astro.props;

const displayDate =
    date instanceof Date ? date.toLocaleDateString() : new Date(date).toLocaleDateString();
---

<a href={href}
   class="group relative block rounded-2xl border border-white/10 bg-[rgba(255,255,255,0.02)]
          shadow-[0_0_0_1px_rgba(255,255,255,0.02)_inset] hover:shadow-[0_8px_24px_rgba(0,0,0,.35)]
          transition-all duration-300 overflow-hidden card">
    <!-- subtle watermark -->
    {watermarkSrc && (
            <img src={watermarkSrc} alt=""
                 class="pointer-events-none select-none absolute right-0 bottom-0 h-full opacity-[0.3]
                translate-x-6 sm:translate-x-2 group-hover:translate-x-0 transition-transform duration-300
                mix-blend-overlay"
                 loading="lazy" />
    )}

    <div class="p-5 sm:p-6 md:p-7 relative">
        <h3 class="font-display text-2xl sm:text-3xl text-white leading-tight">
            {title}
        </h3>

        <!-- badges row -->
        {(tags?.length || minutes) && (
                <div class="mt-3 flex flex-wrap gap-2">
                    {minutes && (
                            <span class="inline-flex items-center rounded-lg bg-[#18354b] text-[#8ed0ff]
                       text-xs px-2.5 py-1">
            {minutes} min read
          </span>
                    )}
                    {tags?.map((t) => (
                            <span class="inline-flex items-center rounded-lg bg-[#26361e] text-[#bdeb7f]
                       text-xs px-2.5 py-1">
            {t}
          </span>
                    ))}
                </div>
        )}

        {excerpt && (
                <p class="mt-3 text-[var(--color-ink-muted)] leading-relaxed line-clamp-3">
                    {excerpt}
                </p>
        )}

        <div class="mt-4 text-sm text-[var(--color-ink-muted)]">
            {displayDate}
        </div>
    </div>
</a>